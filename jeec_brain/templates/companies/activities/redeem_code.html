<html>
    <head>
        <title>Brain</title>
        <link rel="stylesheet" href="/static/admin/css/global.css">
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0/css/materialize.min.css">
        <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
      
        <script src="/static/jquery-3.6.0.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0/js/materialize.min.js"></script>
      
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width,initial-scale=1.0,user-scalable=no,maximum-scale=1">
        <link rel="shortcut icon" href="data:image/x-icon;," type="image/x-icon">
        <link rel="shortcut icon" type="image/x-icon" href="./static/j_logo.png">
      
        <link href="https://fonts.googleapis.com/css?family=Karla|Lato|Roboto|Raleway|Source+Sans+Pro" rel="stylesheet">
      
        <script type="text/javascript">
          $(document).ready(function () {
            $('select').formSelect();
          });
        </script>

  </head>
      
  <body>
      <div class="nav-bar">
        <a href="{{ url_for('companies_api.dashboard') }}"><img class="jeec-logo-mobile"
            src="/static/jeec_logo_mobile.svg"></a>
    
        <div class="company-dash-username right" style="color:black">{{ user.user.name }}</div>
    
        <form action="{{ url_for('companies_api.company_logout') }}" method="get">
          <button class="waves-effect red lighten-2 btn-small right logout-btn"><i class="material-icons left">lock</i>Log
            out</button>
        </form>
    
        <a target="_blank" rel="noopener noreferrer" href="https://jeec.ist" method="get">
          <button class="waves-effect waves-light btn-small right" style="margin-top: -3px; margin-right: 50px;"><i
              class="large material-icons left">web</i>Visit website</button>
        </a>
      </div>
    
      <div class="section-header">
        <h2>Redeem Codes for {{ activity_name }}</h2>
      </div>
    
      <form action="{{ url_for('companies_api.dashboard') }}" method="get" class="row s12">
        <button class="waves-effect waves-light btn back-btn left"><i
            class="material-icons left">arrow_back</i>back</button>
      </form>

      <br>
      <div id="ist_id" style="height: auto;">
        {% if error is not none %}
        <blockquote class = "create-error" >
          {{ error }}
        </blockquote>
        {% endif %}
        {% if message is not none %}
        <blockquote class = "create-error" >
          {{ message }}
        </blockquote>
        {% endif %}
        <center style="margin-top: 40px;">
        
          <form  action="{{ url_for('companies_api.activity_redeem_student') }}" method="post">
            <label class = "sub_section-title">Student's IST id</label>
            <br>
            <input id="code-input" name="ist_id" placeholder="istXXXXXXX" style="margin-top: 20px;" required>
            <div style="margin-top: 40px;">
              <button id="code" type="submit" class="waves-effect blue lighten-2 btn-large dashboard-btn"
                style="width: auto; margin-right: 10px;"><i class="large material-icons left">add</i>Add Student
              </button>
            </div>
          </form>
        </center>
      </div>
  </body>
  <script>
    $(function (){
      $("#ist_id").click(function () {
        $.post("/companies/activity/code", function (data) {
          var code = data.substring(0, 4) + '-' + data.substring(4, 8) + '-' + data.substring(8, 12) + '-' + data.substring(12);
          $('#code-input').val(code);
        });
      });
    }
  </script> 
    
</html>